// transactions are used to track the changes in the wallet
model Transaction {
  id  String @id @default(uuid())
  uid Int    @unique @default(autoincrement())

  amount    Float
  createdAt DateTime          @default(now())
  updatedAt DateTime          @updatedAt
  currency  String            @default("NGN")
  fee       Float             @default(0)
  walletId  String
  type      TransactionType?
  status    TransactionStatus @default(PENDING)

  comment       String?
  source        String?
  note          String?
  notifications Notification[]
  metadata      Json?
  requestId     String?

  relatedTransactionIds String[] @default([])
  orderId               String?
  order                 Order?   @relation(fields: [orderId], references: [id])
}

model Order {
  id          String      @id @default(uuid())
  uid         Int         @unique @default(autoincrement())
  amount      Float?
  currency    String      @default("NGN")
  status      OrderStatus @default(OPEN)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  title       String
  description String?

  closedAt DateTime?

  userId String

  user User @relation(fields: [userId], references: [id])

  transactions Transaction[]
}
